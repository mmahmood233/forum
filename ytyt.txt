let feedbackType = ''; // Track current feedback type: 'like' or 'dislike'

document.getElementById('likeBtn').addEventListener('click', () => {
    handleFeedback('like');
});

document.getElementById('dislikeBtn').addEventListener('click', () => {
    handleFeedback('dislike');
});

function handleFeedback(type) {
    if (type === feedbackType) {
        // If clicking the same button again, remove the feedback
        sendFeedback('remove_' + type);
        document.getElementById(type + 'Btn').classList.remove('active');
        feedbackType = '';
    } else {
        // Otherwise, switch feedback type and update UI
        if (feedbackType !== '') {
            // Remove current feedback if exists
            sendFeedback('remove_' + feedbackType);
            document.getElementById(feedbackType + 'Btn').classList.remove('active');
        }
        
        // Set new feedback type
        feedbackType = type;
        sendFeedback(type);
        document.getElementById(type + 'Btn').classList.add('active');
    }
}

function sendFeedback(type) {
    fetch('/feedback', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify({ feedback: type }),
    })
    .then(response => response.json())
    .then(data => {
        console.log('Success:', data);
    })
    .catch((error) => {
        console.error('Error:', error);
    });
}
